<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/dca83bf159.js" crossorigin="anonymous"></script>
    <title>Document</title>
</head>

<style>
    header>div{
       
        display: flex;
        align-items: center;
    }
    header{
        display: flex;
        justify-content: space-between;
    }

    /* #search_results>div{
        border: 2px solid black;
    } */
    #icon{
        height: 30px;
        width:130px;
    }
    header input{
        padding: 8px 300px;
        font-size: 25px;
    }
    header button{
        padding: 10px 20px;
    }

    
    .fas{
        font-size: 25px;
    }
    .last{
        margin-right: 30px;
    }
    .fa-microphone{
        margin-left: 20px;
    }
    .fa-bars{
        margin-right: 20px;
    }
    ::placeholder{
        font-size: 25px;
        text-align: left;
    }

    #search_results{
    display: grid;
    grid-template-columns: repeat(4,1fr);
    grid-gap: 20px;
    margin-top: 4%;
    }
    #search_results>img{
        height: 180px;
        width: 320px;
    }

</style>
<body>

    <header>
        <div>
        <i class="fas fa-bars"></i>
        <img id="icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/YouTube_Logo_2017.svg/2560px-YouTube_Logo_2017.svg.png" alt="">
        

        </div>

        <div >

            <input type="text" id="video" placeholder="Search">
            <button onclick="searchVideo()"><i class="fas fa-search  "></i></button>
            <i class="fas fa-microphone"></i>


        </div>

        <div>
            <!-- <svg style="display:"
><path d="M16,4v4h4V4H16z M19,7h-2V5h2V7z M16,10v4h4v-4H16z M19,13h-2v-2h2V13z M10,4v4h4V4H10z M13,7h-2V5h2V7z M10,10v4h4v-4H10z M13,13h-2v-2h2V13z M16,16v4h4v-4H16z M19,19h-2v-2h2V19z M10,16v4h4v-4H10z M13,19h-2v-2h2V19z M4,4v4h4V4H4z M7,7H5V5h2V7z M4,10 v4h4v-4H4z M7,13H5v-2h2V13z M4,16v4h4v-4H4z M7,19H5v-2h2V19z"></path> </svg> -->
               
          
            <i class=" last fas fa-video"></i>
            <i class=" last fas fa-bell"></i>
            <i class=" last fas fa-user-circle"></i>
           

        </div>

    </header>


    
    <div id="search_results"></div>
    <!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/ToVJxUELgUk" title="YouTube video player"
        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe> -->

   
    
  

</body>
</html>

<script>

     const url = ""

        const key = ""

const results =document.querySelector('#search_results')

async function searchVideo(){
    try{
        let video_query= document.querySelector("#video").value
        let response = await fetch(`https://youtube.googleapis.com/youtube/v3/search?videoEmbeddable=true&part=snippet&maxResults=15&q=${video_query}&type=video&key=AIzaSyARVhX5SK0cgLd39MbemmARw0WsIGALAJk`)
        let data = await response.json()
        let video = data.items 
        

        // showcomment()
     
          
    

        ondisplay(video) 
        
    }
    catch(er){
        console.log(er)
    }
}

        let recommendation = JSON.parse(localStorage.getItem('recommendation_results'))
        ondisplay(recommendation)



function ondisplay(items){
  

    results.innerHTML=null

    items.map((el)=>{
        // console.log(el)
        
        let { id: { videoId } } = el;
        let{snippet}=el
       
       
        let{snippet:{thumbnails:{medium:{url}}}}=el
        let{snippet:{title}}=el
        let thumb= document.createElement('img')
        thumb.src=url
        
        let head=document.createElement('h3')
        head.innerHTML=title
        let div=document.createElement('div')

        // console.log(url)
        // console.log(videoId);

        let data_to_send = {
            snippet,
            videoId



        }
     



        // let(snip)

        div.onclick=()=>{
            playvideo(data_to_send,items)
        }

 


        

       
        div.append(thumb,head)
        results.append(div)
    });


};

        function playvideo(data,recommendation) {


            localStorage.setItem("clicked_video",JSON.stringify(data))
            localStorage.setItem("recommendation_results",JSON.stringify(recommendation))
            
            window.location.href="video.html"




            // results.innerHTML = null
           
            // // console.log("vikas")
            // console.log(videoId)
            // console.log(el)
            // let iframe = document.createElement("iframe")
            // iframe.src = `https://www.youtube.com/embed/${videoId}`
            // iframe.height = "500"
            // iframe.width = "700"
            // iframe.setAttribute("allowfullscreen", "true")
            // results.append(iframe)

        }




</script>